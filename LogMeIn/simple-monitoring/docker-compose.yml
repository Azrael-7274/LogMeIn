# d√©fini toutes les services (images docker) qu'on va faire tourner

services:


  database: # on initialise d'abord la BDD parce que le backend en depend
        image: postgres:16
        volumes:
          - postgres-data:/var/lib/postgresql/data
        environment:
          - POSTGRES_PASSWORD=logmein123
          - POSTGRES_DB=log_db



  backend:  # Backend flask construit a partir du dockerfile
          build:
            context: ./backend
          depends_on:
            - database

  web:
          build: ./frontend
          ports:
            - "3000:3000"
          environment:
            - DB_HOST=database
          depends_on:
            - backend

volumes:
       postgres-data:
